"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[21563],{279812:(e,t,a)=>{a.d(t,{Z:()=>s});var o=a(616550),n=a(196074),i=a(410150);function s(){let e=(0,o.k6)(),t=(0,i.HG)();return a=>{t?(0,n.Z)(a,{disableOriginCheck:!0}):e.push(a)}}},644845:(e,t,a)=>{a.d(t,{Z:()=>o});let o=(e,t)=>{let a=new Date;return new Date(1e3*e)<=new Date(a.getFullYear()-(t||18),a.getMonth(),a.getDate())}},634757:(e,t,a)=>{a.d(t,{Z:()=>n});var o=a(785893);let n=({size:e=56})=>(0,o.jsxs)("svg",{display:"block",fill:"none",fillRule:"evenodd",height:e,viewBox:"0 0 512 512",width:e,xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("path",{d:"M482.56 261.36c0-16.73-1.5-32.83-4.29-48.27H256v91.29h127.01c-5.47 29.5-22.1 54.49-47.09 71.23v59.21h76.27c44.63-41.09 70.37-101.59 70.37-173.46z",fill:"#4285f4"}),(0,o.jsx)("path",{d:"M256 492c63.72 0 117.14-21.13 156.19-57.18l-76.27-59.21c-21.13 14.16-48.17 22.53-79.92 22.53-61.47 0-113.49-41.51-132.05-97.3H45.1v61.15c38.83 77.13 118.64 130.01 210.9 130.01z",fill:"#34a853"}),(0,o.jsx)("path",{d:"M123.95 300.84c-4.72-14.16-7.4-29.29-7.4-44.84s2.68-30.68 7.4-44.84V150.01H45.1C29.12 181.87 20 217.92 20 256c0 38.08 9.12 74.13 25.1 105.99l78.85-61.15z",fill:"#fbbc05"}),(0,o.jsx)("path",{d:"M256 113.86c34.65 0 65.76 11.91 90.22 35.29l67.69-67.69C373.03 43.39 319.61 20 256 20c-92.25 0-172.07 52.89-210.9 130.01l78.85 61.15c18.56-55.78 70.59-97.3 132.05-97.3z",fill:"#ea4335"}),(0,o.jsx)("path",{d:"M20 20h472v472H20V20z"})]})},887103:(e,t,a)=>{a.d(t,{Di:()=>s,Jl:()=>o,R:()=>n,aU:()=>l,j2:()=>i,pN:()=>r});let o=1e4,n="permanent_account_closure",i="account_deletion_email_sent",s="account_deactivated",l="unlink_successful",r="account_switch_to_settings"},894789:(e,t,a)=>{a.d(t,{Z:()=>n});let o=e=>(e||"").replace(/-/g,"+").replace(/_/g,"/"),n=e=>JSON.parse(decodeURIComponent(atob(o(e.split(".")[1])).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join("")))},728891:(e,t,a)=>{a.d(t,{Z:()=>i});var o=a(375182),n=a(1006);async function i(e){let t=await (0,o.Kw)(),a=t?{user_ids:Object.keys(t)}:{};(0,n.tj)(`mweb_multiple_accounts_${e}`,a)}},715153:(e,t,a)=>{a.d(t,{eN:()=>_,_:()=>p,kB:()=>u});var o=a(635258),n=a(868808),i=a(723184),s=a(616550);let l=["/resource/:name/:method/","/resource/commerce/:name/:method/","/:username/pins/follow/","/email/remove/","/about/trademark/:claim_type/","/about/copyright/dmca-pin/web-result/:id/","/about/copyright/dmca-pin/pin/:id/","/about/copyright/dmca-pin/","/about/koplg/","/about/:lawName/","/about/radtc/","/website/confirm/","/oauth/","/app-factory-oauth/","/settings/extension/uninstall/","/offsite/","/amp/(.*)"],r=(e,t)=>{let a=new URL(e,t);return l.some(e=>!!(0,s.LX)(a.pathname,{path:e,exact:!0}))};var c=a(415787);let _=e=>e&&(0,n.Qg)(e)&&o.lfe!==e?(0,n.Qc)(e).relative:"/",u=(e,t)=>{let a=(0,n.Jx)(e);return r(a,t)||(0,i.Z)(a)===n.vx.TRUSTED_DIFFERENT_ORIGIN},p=({forceFullPageNavigation:e,history:t,next:a,noLocationReplace:o,origin:i})=>{let s=(0,n.Jx)(a);u(a,i)||!t||e?(e&&(0,c.nP)("webapp.duplo.navigateOnLogin.forceFullPageNavigation",{sampleRate:1}),window.location.assign(s)):o?t.push(_(s)):t.replace(_(s))}},171707:(e,t,a)=>{a.d(t,{Z:()=>x});var o=a(667294),n=a(883119),i=a(459870),s=a(894789),l=a(391731),r=a(260134),c=a(297728),_=a(730212),u=a(1006),p=a(154785),d=a(634757),g=a(144326),h=a(297726),m=a(244734),b=a(785893);function w(){let e=(0,g.ZP)(),[t,a]=(0,o.useState)();return(0,h.q)()?null:(0,b.jsxs)(n.xu,{position:"relative",children:[(0,b.jsx)(n.iP,{onTap:()=>a(!0),children:(0,b.jsxs)(n.xu,{alignItems:"center",color:"secondary",display:"flex",height:40,justifyContent:"center",position:"relative",rounding:"pill",children:[(0,b.jsx)(n.xu,{height:24,marginTop:1,width:24,children:(0,b.jsx)(d.Z,{size:20})}),(0,b.jsx)(n.xu,{marginStart:2,children:(0,b.jsx)(n.xv,{weight:"bold",children:e._('Connect with Google', 'googleConnectButtonWithDisabledSDK.buttonText', 'Connect with Google button text')})})]})}),t&&(0,b.jsx)(m.Z,{onDismiss:()=>a(!1),type:"google"})]})}function v({onGoogleConnectSuccess:e,onTouch:t}){let{locale:a}=(0,_.B)(),c=(0,o.useRef)(null),d=(0,r.M)(),g=(0,o.useRef)(e),h=(0,p.Z)(),m=(0,i.Z)();return(0,o.useEffect)(()=>{g.current=e},[e]),(0,o.useEffect)(()=>{let e=({credential:e,select_by:t})=>{(0,u.My)(`unauth_mweb.gsi_button.select_by.${t}`),(0,u.NC)("press_google_connect_button");let a=(0,s.Z)(e);g.current({google_open_id_token:e,autologin:!1},{type:"google",google_open_id_token:e,first_name:a.given_name,last_name:a.family_name,image_url:a.picture})};return(async()=>{await d?.ensureInit("button",e),(0,l.ru)({buttonRef:c,isDesktop:!1,isVisualRefreshEnabled:m,locale:a,onTouch:t})})(),()=>{d?.removeButtonCallback(e)}},[d,m,a]),(0,b.jsx)(n.xu,{position:"relative",children:(0,b.jsx)(n.iP,{onTap:()=>{h({action:"click",item:"google-connect-button"}),(0,u.EX)({event:"start",provider:"google"})},children:(0,b.jsx)(n.xu,{"aria-label":"GOOGLE_SIGNIN_BUTTON",height:44,children:(0,b.jsx)(n.xu,{ref:c,width:"100%"})})})})}function x({onGoogleConnectSuccess:e,onTouch:t}){let{checkExperiment:a}=(0,c.F)(),{anyEnabled:o}=a("mweb_google_disabled");return o?(0,b.jsx)(w,{}):(0,b.jsx)(v,{onGoogleConnectSuccess:e,onTouch:t})}},844745:(e,t,a)=>{a.d(t,{Z:()=>n});var o=a(116897);let n=e=>new Set([...o.EU,...o.rT,...o.IO]).has(e)},72766:(e,t,a)=>{a.d(t,{f:()=>I,l:()=>O});var o=a(667294),n=a(545007),i=a(191855),s=a(252071),l=a(609326),r=a(488792),c=a(914896),_=a(418256),u=a(744920),p=a(591692),d=a(887103),g=a(76367),h=a(297728),m=a(484777),b=a(103741),w=a(730212),v=a(235581),x=a(864723),f=a(786525),k=a(1006),E=a(711120),y=a(356801),C=a(116897),P=a(728891),A=a(715153),Z=a(227984),j=a(814779),D=a(592305),T=a(493651),S=a(415787);let R=e=>({type:"AUTHENTICATE_USER",payload:{user:e}}),I=()=>{let e=(0,r.Z)(),t=(0,h.F)(),a=(0,n.I0)(),{country:I,countryFromHostName:O,countryFromIp:z,regionFromIp:L,userAgent:{isTablet:M,isMobile:N}}=(0,w.B)(),F=(0,m.Z)(),H=(0,E.Z)();return(0,o.useCallback)(async(o,n,r="/",h={isAutologin:!1,isSwitchAccount:!1,noLocationReplace:!1,recaptchaV3Token:"default",noImmediateRedirect:!1,useAlternativeResourceCall:!1,trigger:"other",accountUnlinked:!1},m)=>{F();let w=!M&&!N,{isAutologin:E,isSwitchAccount:U,noLocationReplace:G,recaptchaV3Token:B,noImmediateRedirect:K,useAlternativeResourceCall:X,trigger:Y,accountUnlinked:V}=h;(0,x.M0)().setItem(l.V6,(0,g.nY)(o));let J=t=>{e({...m,event_type:t,aux_data:{...m.aux_data,upsell_reason:m.aux_data?.upsell_reason||(E?"autologin":(0,x.M0)().getItem(l.bg)),upsell_view_count:(0,x.M0)().getItem(l.w0)??0}}),7536===t&&(0,x.M0)().setItem(l.w0,0)},W={get_user:!0,...o,app_type_from_client:6,recaptchaV3Token:B},$=(0,D.t_)();$&&(W={...W,visited_pages_before_login:$});let q=(0,Z.O)();q&&(W={...W,referrer:q});let Q=s.Z.create("UserSessionResource",W).callCreate();if(X&&o.username_or_email&&o.password){let e=new FormData;e.append("username",o.username_or_email),e.append("password",o.password),Q=fetch("/resource/UserSessionResource/create/",{method:"POST",body:e,credentials:"include",headers:{Accept:"application/json, text/javascript, */*","X-CSRFToken":(0,_._V)()||"","X-Requested-With":"XMLHttpRequest","X-Pinterest-PWS-Handler":(0,T.H)()||""}}).then(e=>{if(200!==e.status)throw Error(e.statusText);return e.json()}).catch(e=>Promise.reject(e))}try{E?(0,k.dy)({event:"login_api_call_start",provider:o.google_open_id_token?"google":"facebook"}):(0,k.EX)({event:"login_api_call_start",provider:(0,g.nY)(o)}),J(7534),H({action:E?"autologin":"login",event:"attempt",type:(0,g.lp)(o),trigger:Y});let e=await Q;E?(0,k.dy)({event:"login_api_call_success",provider:o.google_open_id_token?"google":"facebook"}):(0,k.EX)({event:"login_api_call_success",provider:(0,g.nY)(o)}),a(R(e.resource_response.data.user));let s=e.client_context,l=e.resource_response.data.user.gatekeeper_experiments;if(l){let{active:e,triggerable:a}=l;e&&a||(0,S.nP)("webapp.authentication.emptyExperimentsDebug",{sampleRate:1,tags:{active:String(!!e),triggerable:String(!!a)}}),t.updateExperiments(e,a)}else(0,S.nP)("webapp.authentication.updateExperimentsFailed");s&&s.placed_experiences&&a((0,u.OD)(s.placed_experiences)),(0,P.Z)("authentication.login_success"),g.ZP.storeLoginCredentialsToBrowser(o),J(7536),H({action:E?"autologin":"login",event:"success",type:(0,g.lp)(o),trigger:Y}),(0,p.Z)(),c.zN(i.e7.name),c.zN(i.x3.name),(0,f.Nh)(C.AA,1),"/"!==r&&(0,j.E)(!0),U?(0,v.Z)().then(()=>{let t=`/${e.resource_response.data?.user.username||""}`+(V?`?message=${d.aU}`:"");window.location.href=t}):E&&!w||K||(!o.google_open_id_token&&w&&t.checkExperiment("dweb_arr_modal_post_fb_login").anyEnabled&&(0,y.I9)(),(0,A._)({forceFullPageNavigation:w,history:n,next:r,noLocationReplace:G,origin:window.location.toString()})),"facebook"===(0,g.nY)(o)&&!w&&t.checkExperiment("mweb_arr_modal_post_fb_login").anyEnabled&&(0,y.I9)(),(0,b.ko)({country:I,countryFromHostName:O,countryFromIp:z,regionFromIp:L,deviceType:"Mobile",eventCategory:"Logins"})}catch(e){if(E?(0,k.dy)({event:"login_api_call_failure",provider:o.google_open_id_token?"google":"facebook"}):(0,k.EX)({event:"login_api_call_failure",provider:(0,g.nY)(o)}),1201!==e.api_error_code||E||w)throw J(7535),H({action:E?"autologin":"login",event:"fail",type:(0,g.lp)(o),trigger:Y}),U&&(0,P.Z)("authentication.login_error"),e;if(n){let t={creds:o,next:r,phoneNumber:e?.data?.phone_number_end};n.push({pathname:"/login/mfa/",state:t})}}},[a,I,O,z,F,t,N,M,e,L,H])},O=()=>{let e=(0,h.F)(),t=(0,n.I0)(),a=(0,m.Z)();return({client_context:o,resource_response:n})=>{let{data:i}=n;i&&(a(),t(R(i.user)));let s=i.user.gatekeeper_experiments;if(s){let{active:t,triggerable:a}=s;t&&a||(0,S.nP)("webapp.crossDomainAutologin.emptyExperimentsDebug",{sampleRate:1,tags:{active:String(!!t),triggerable:String(!!a)}}),e.updateExperiments(t,a)}else(0,S.nP)("webapp.crossDomainAutologin.updateExperimentsFailed");o&&t((0,u.OD)(o.placed_experiences))}}},834945:(e,t,a)=>{a.d(t,{m:()=>T});var o=a(545007),n=a(191855),i=a(252071),s=a(609326),l=a(259232),r=a(488792),c=a(914896),_=a(194093),u=a(744920),p=a(591692),d=a(677657),g=a(267005),h=a(844543),m=a(297728),b=a(484777),w=a(103741),v=a(730212),x=a(235581),f=a(864723),k=a(978993),E=a(1006),y=a(711120),C=a(728891),P=a(227984),A=a(844745),Z=a(592305),j=a(415787);let D=e=>({type:"REGISTER_USER",payload:{user:e}}),T=()=>{let e=(0,m.F)(),t=(0,o.I0)(),{country:a,countryFromHostName:T,countryFromIp:S,regionFromIp:R,isAuthenticated:I}=(0,v.B)(),O=(0,b.Z)(),z=(0,r.Z)(),L=(0,y.Z)();return(o,{signupAttemptContextEvent:r})=>{let m=(0,h.yV)(o),b=(0,f.M0)(),v=e=>{z({...r,event_type:e,aux_data:{...r.aux_data,upsell_reason:r.aux_data?.upsell_reason||b.getItem(s.bg)||null,upsell_view_count:b.getItem(s.w0)||0}}),7487===e&&b.setItem(s.w0,0)};v(7537),L({action:"signup",event:"attempt",type:m}),O();let y=0,M=(0,A.Z)(a),N=new Promise(e=>{M?setTimeout(()=>{e(void 0)},3e3):e(void 0)});return new Promise((r,b)=>{let A=()=>{let O=(0,Z.t_)(),z=(0,Z.ZP)(),M=(0,P.O)(),F={...o,user_behavior_data:function(){let e=(0,f.M0)().getItem(s.E9);return JSON.stringify(e?{LOCALSTORAGE_UNAUTH_TOPICS_FOLLOWED:e}:{})}(),visited_pages:O},H=(0,d.Z)({checkExperiment:e.checkExperiment});H.length>0&&(F={...F,privacy_disclaimer_acknowledge:H}),M&&(F={...F,referrer:M}),(0,j.nP)("webapp.debug_signup_type.redux_registration",{sampleRate:1,tags:{CHECK_TYPE:(0,h.Eh)(F,"CHECK_TYPE")??"none",CHECK_EXISTS:(0,h.Eh)(F,"DEPRECATED_CHECK_EXISTS"),CHECK_TRUTHY:(0,h.Eh)(F,"DEPRECATED_CHECK_TRUTHY")}}),i.Z.create("UserRegisterResource",{...F,get_user:!0}).callCreate().then(n=>N.then(()=>{(0,k.L_)("d_pif_invite");let i=n.client_context;t(D(n.resource_response.data.user));let s=n.resource_response.data.user.gatekeeper_experiments;if(s){let{active:t,triggerable:a}=s;t&&a||(0,j.nP)("webapp.registration.emptyExperimentsDebug",{sampleRate:1,tags:{active:String(!!t),triggerable:String(!!a)}}),e.updateExperiments(t,a)}else(0,j.nP)("webapp.registration.updateExperimentsFailed");i&&i.placed_experiences&&t((0,u.OD)(i.placed_experiences)),I&&(0,C.Z)("registration.signup_success");let{email:c,username:_,password:d}=o,g=c||_||null,h=d||null,{credentials:b}=navigator;if(b&&g&&h)try{let e=new window.PasswordCredential({id:g,password:h});(0,E.My)("unauth_mweb.navigatorCredentials.store.attempt"),b.store(e).then(()=>{(0,E.My)("unauth_mweb.navigatorCredentials.store.success")})}catch(e){(0,E.My)("unauth_mweb.navigatorCredentials.store.error")}v(7487),(0,j.S0)("mweb.signup.success.landing.page.signals",z.length??0),(0,j.nP)("mweb.signup.success.landing.page.signals.inc",{tags:{page_visits:z.length??0}}),(0,E.tj)("mweb.signup.success.landing.page.signals.tra",{page_visits:z.length??0}),L({action:"signup",event:"success",type:m}),(0,l.Z)(),(0,p.Z)(!0),I&&(0,x.Z)(),(0,w.ko)({country:a,countryFromHostName:T,countryFromIp:S,regionFromIp:R,deviceType:"Mobile",eventCategory:"NewUsers"}),r()})).catch(e=>{let t=(0,_.Z)(e,"api_error_code");t===g.tz&&((0,E.My)("multi_step_set_age_restrict_cookie"),c.t8(n.It,"1",(0,c.kZ)(n.It))),y<3&&[g.dO,g.cZ].includes(t??0)?(y+=1,A()):(v(7488),L({action:"signup",event:"fail",type:m}),I&&(0,C.Z)("registration.signup_error"),b(e))})};A()})}}},244734:(e,t,a)=>{a.d(t,{Z:()=>l});var o=a(883119),n=a(758339),i=a(144326),s=a(785893);function l({type:e,onDismiss:t}){let a=(0,i.ZP)(),l="facebook"===e?a._('Oops! Facebook isn\'t available', 'socialAuthDisabled.facebook.title', 'Title for the modal shown when Facebook services are not working'):a._('Oops! Google isn\'t available', 'socialAuthDisabled.google.title', 'Title for the modal shown when Google services are not working'),r="facebook"===e?a._('Looks like Facebook isn\'t available right now.\n\nGive another option a try or refresh the page and try again later.', 'socialAuthDisabled.facebook.description', 'Description for the modal shown when Facebook services are not working'):a._('Looks like Google isn\'t available right now.\n\nGive another option a try or refresh the page and try again later.', 'socialAuthDisabled.google.description', 'Description for the modal shown when Google services are not working');return(0,s.jsx)(n.ZP,{accessibilityModalLabel:"",isOpen:!0,mobileHideCloseIcon:!0,onDismiss:t,type:"social_auth_disabled_modal",children:(0,s.jsxs)(o.xu,{padding:5,children:[(0,s.jsx)(o.xu,{marginBottom:3,children:(0,s.jsx)(o.X6,{accessibilityLevel:1,size:"500",children:l})}),(0,s.jsx)(o.xu,{marginBottom:3,children:(0,s.jsx)(o.xv,{children:r})}),(0,s.jsx)(o.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:(0,s.jsx)(o.xu,{paddingY:1,children:(0,s.jsx)(o.zx,{accessibilityLabel:a._('OK', 'socialAuthDisabled.okButton', 'Button that closes modal shown when Facebook or Google services are not working'),color:"red",onClick:t,size:"lg",text:a._('OK', 'socialAuthDisabled.okButton', 'Button that closes modal shown when Facebook or Google services are not working')})})})]})})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/21563-98e4402564537c21.mjs.map